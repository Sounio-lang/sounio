//@ run-pass
// Basic async/await test

// Simple async function
async fn compute_value() -> i32 with Async {
    42
}

// Async function that awaits another
async fn double_value() -> i32 with Async {
    let x = compute_value().await
    x * 2
}

fn main() with IO, Async {
    // Test async block
    let future = async {
        100
    }

    let result = future.await
    if result == 100 {
        print("async_block: PASS\n")
    } else {
        print("async_block: FAIL\n")
    }

    // Test async function call
    let value = double_value().await
    if value == 84 {
        print("async_fn: PASS\n")
    } else {
        print("async_fn: FAIL\n")
    }
}
