//@ run-pass
// Async channels test

fn main() with IO, Async {
    // Create a channel
    let (tx, rx) = channel::<i32>()

    // Spawn producer
    spawn {
        tx.send(42).await
        tx.send(100).await
    }

    // Receive values
    let first = rx.recv().await
    let second = rx.recv().await

    if first == 42 && second == 100 {
        print("channel_basic: PASS\n")
    } else {
        print("channel_basic: FAIL\n")
    }
}
